---
title: 面向对象
date: 2020-05-24 17:27:03
tags:
---

[TOC]
# 大纲
面向对象三大特性
重载，重写，隐藏分别是什么意思。
虚函数表
静态多态（重载），动态多态（虚函数）
虚函数，纯虚函数，抽象基类，虚析构函数
访问控制，继承类型，public, protected, private
static const
函数重载二义性
虚继承，虚基类
多继承

```
class basic {
public:
    void method1(){
        std::cout << "basic::method1" << std::endl;
    }
    virtual void method2(int x) {
        std::cout << "basic::method2" << std::endl;
    }
    void method3(int x) {
        std::cout << "basic::method3" << std::endl;
    }
};

class son:public basic {
public:
    void method1(){ // 隐藏，有别于覆盖
        std::cout << "son::method1" << std::endl;
    }
    void method2(int y) { // 覆盖
        std::cout << "son::method2" << std::endl;
    }
    void method3(float x, int y) { //隐藏，有别于重载
        std::cout << "son::method3" << std::endl;
    }
    void method3(float x) { // 重载 method3(float x, int y)
        std::cout << "son::method3,float x" << std::endl;
    }
};

```

# 面向对象三大特性

## 封装

概念：隐藏实现细节，对外提供接口。

作用：高内聚低耦合，提升代码复用性；安全性；易维护。

实现方式：访问控制符public private protected。

## 继承

概念：子类获得父类的方法和属性。

作用：代码复用，多态的前提

实现方式：单继承，多继承。

## 多态
概念：同一种事物有多种形态。例如狗，可以有不同的品种。

作用：可以不考虑实例的类型而使用实例，提升了灵活性和可扩展的能力。

实现方式：继承和虚函数表，在使用时，父类指针指向子类对象。

# 重载，重写，隐藏

|类别|作用域|函数名|参数列表|返回值|是否有virtual修饰|
|-:|-:|-:|-:|-:|-:|
|重载|同一作用域|相同|不同|无要求|无要求|
|重写（覆盖）|不同作用域（父与子）|相同|相同|相同|父类必须有virtual修饰|
|隐藏（重定义）|不同作用域（父与子）|相同|不同|无要求|父类带virtual修饰|
|隐藏（重定义）|不同作用域（父与子）|相同|无要求|无要求|父类不带virtual修饰|

## 重载overload

```
class A{
public:
  void test(int i);
  void test(double i);//overload
  void test(int i, double j);//overload
  void test(double i, int j);//overload
  int test(int i);         //错误，非重载。注意重载不关心函数返回类型。
};
```
重载是在同一作用域内，同名函数的参数列表不同，根据参数列表判断使用哪个函数。

## 重写override
```
// 3重写了1
// 4重写了2（协变情况）
class A
{
public:
    virtual void Swap(int* a, int* b); //1

    virtual A* get(char* str);         //2
};

class B : public A
{
public:
    virtual void Swap(int* a, int* b); //3

    virtual B* get(char* str);         //4
};
```
协变情况：在C++中，只要原来的返回类型是基类类型的指针或引用，新的返回值类型是派生类的指针或引用，覆盖的方法就可以改变返回类型，这样的返回类型称为协变返回类型。

## 隐藏

```
//派生类中3隐藏了1
//派生类中4隐藏了2
class A
{
public:
    void Swap(int* a, int* b); //1

    A* get(char* str);         //2
};

class B : public A
{
public:
    void Swap(int* a); //3

    B* get(char* str);         //4
};
```

派生类的函数屏蔽了基类的同名函数，对参数列表和返回无要求。如果基类的函数带virtual，那么参数列表相同时就是重写，参数列表不同时是隐藏；如果基类的函数不带virtual修饰，那么不论参数列表是否相同，都是隐藏。

# 静态多态，动态多态

## 静态多态

也叫编译器多态，根据参数确定使用的函数。有两种实现方式，函数重载和函数模板。

## 动态多态
也叫运行时多态，在运行时根据运行实例确定使用的函数。实现方式是虚函数。


# 虚函数


# 参考
[1] 重载、重写和隐藏三者的区别  （https://www.cnblogs.com/evenleee/p/10933793.html）
[2] C++中重载、重写（覆盖）和隐藏的区别 (https://www.cnblogs.com/zhangjxblog/p/8723291.html)